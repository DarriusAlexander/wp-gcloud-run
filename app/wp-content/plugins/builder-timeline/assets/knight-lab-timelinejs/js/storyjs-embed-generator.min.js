function getScriptPath(c){var a=document.getElementsByTagName("script"),d="";for(var b=0;b<a.length;b++){a[b].src.match(c)&&(d=a[b].src)}return d.split("?")[0].split("/").slice(0,-1).join("/")+"/"}function getUrlVars(f){var b=[],g,d,a=f.toString();a.match("&#038;")?a=a.replace("&#038;","&"):a.match("&#38;")?a=a.replace("&#38;","&"):a.match("&amp;")&&(a=a.replace("&amp;","&"));a.match("#")&&(a=a.split("#")[0]);d=a.slice(a.indexOf("?")+1).split("&");for(var c=0;c<d.length;c++){g=d[c].split("=");b.push(g[0]);b[g[0]]=g[1]}return b}function getLinkAndIframe(){var O={},B=document.getElementById("embed-source-url"),H=document.getElementById("embed-width"),D=document.getElementById("embed-height"),K=document.getElementById("embed-maptype"),C=document.getElementById("embed-language"),G=document.getElementById("embed_code"),z=document.getElementById("embed-font"),T=document.getElementById("embed-wordpressplugin"),N=document.getElementById("embed-startatend"),J=document.getElementById("embed-hashbookmark"),Q=document.getElementById("embed-startzoomadjust"),L=document.getElementById("embed-startatslide"),F=document.getElementById("embed-debug"),P=document.getElementById("embed-googlemapkey"),x=!1,I=!1,M=!1,k,R,q,A,j;B.value.match("docs.google.com")?j=getUrlVars(B.value).key:B.value==""?j="0Agl_Dv6iEbDadHdKcHlHcTB5bzhvbF9iTWwyMmJHdkE":j=B.value;N.checked&&(x=!0);J.checked&&(I=!0);F.checked&&(M=!0);A="[timeline ";H.value>0&&(A+="width='"+H.value+"' ");D.value>0&&(A+="height='"+H.value+"' ");A+="font='"+z.value+"' ";A+="maptype='"+K.value+"' ";A+="lang='"+C.value+"' ";A+="src='"+B.value+"' ";x&&(A+="start_at_end='"+x+"' ");I&&(A+="hash_bookmark='"+I+"' ");M&&(A+="debug='"+M+"' ");P.value!=""&&(A+="gmap_key='"+P.value+"' ");parseInt(L.value,10)>0&&(A+="start_at_slide='"+parseInt(L.value,10)+"' ");parseInt(Q.value,10)>0&&(A+="start_zoom_adjust='"+parseInt(Q.value,10)+"' ");A+="]";O.wordpress=A;q=generator_embed_path+"?source="+j;q+="&font="+z.value;q+="&maptype="+K.value;q+="&lang="+C.value;x&&(q+="&start_at_end="+x);I&&(q+="&hash_bookmark="+I);M&&(q+="&debug="+M);parseInt(L.value,10)>0&&(q+="&start_at_slide="+parseInt(L.value,10));parseInt(Q.value,10)>0&&(q+="&start_zoom_adjust="+parseInt(Q.value,10));P.value!=""&&(q+="&gmap_key="+P.value);H.value>0&&(q+="&width="+H.value);D.value>0&&(q+="&height="+D.value);k="<iframe src='"+q+"'";if(H.value>0||H.value.match("%")){k+=" width='"+H.value+"'"}if(D.value>0||D.value.match("%")){k+=" height='"+D.value+"'"}k+=" frameborder='0'></iframe>";O.iframe=k;O.link=q;T.checked?O.copybox=A:O.copybox=k;return O}function updateEmbedCode(c,a){var d=document.getElementById("embed_code"),b=getLinkAndIframe();d.value=b.copybox;jQuery("#preview-embed-link").attr("href",b.link);jQuery("#preview-embed-iframe").html(b.iframe);jQuery("#preview-embed").css("display","block")}if(typeof generator_embed_path=="undefined"||typeof generator_embed_path=="undefined"){var generator_embed_path=getScriptPath("storyjs-embed-generator.js").split("js/")[0];generator_embed_path.match("http")?generator_embed_path=generator_embed_path:generator_embed_path=="/"?generator_embed_path="index.html":generator_embed_path+="index.html"};