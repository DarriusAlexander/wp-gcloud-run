function getEmbedScriptPath(d){var b=document.getElementsByTagName("script"),f="",c="";for(var a=0;a<b.length;a++){b[a].src.match(d)&&(f=b[a].src)}f!=""&&(c="/");return f.split("?")[0].split("/").slice(0,-1).join("/")+c}function createStoryJS(Z,I){function ac(){LoadLib.js(W.js,D)}function D(){R.js=!0;W.lang!="en"?LazyLoad.js(ab.locale,H):R.language=!0;z()}function H(){R.language=!0;z()}function q(){R.css=!0;z()}function B(){R.font.css=!0;z()}function j(){R.font.js=!0;z()}function z(){if(R.checks>40){return}R.checks++;if(R.js&&R.css&&R.font.css&&R.font.js&&R.language){if(!R.finished){R.finished=!0;U()}}else{R.timeout=setTimeout("onloaded_check_again();",250)}}function K(){var a="storyjs-embed";L=document.createElement("div");W.embed_id!=""?V=document.getElementById(W.embed_id):V=document.getElementById("timeline-embed");V.appendChild(L);L.setAttribute("id",W.id);if(W.width.toString().match("%")){V.style.width=W.width.split("%")[0]+"%"}else{W.width=W.width-2;V.style.width=W.width+"px"}if(W.height.toString().match("%")){V.style.height=W.height;a+=" full-embed";V.style.height=W.height.split("%")[0]+"%"}else{if(W.width.toString().match("%")){a+=" full-embed";W.height=W.height-16;V.style.height=W.height+"px"}else{a+=" sized-embed";W.height=W.height-16;V.style.height=W.height+"px"}}V.setAttribute("class",a);V.setAttribute("className",a);L.style.position="relative"}function U(){VMM.debug=W.debug;P=new VMM.Timeline(W.id);P.init(W);O&&VMM.bindEvent(global,onHeadline,"HEADLINE")}var P,L,V,J,O=!1,G="2.24",ad="1.7.1",Y="",R={timeout:"",checks:0,finished:!1,js:!1,css:!1,jquery:!1,has_jquery:!1,language:!1,font:{css:!1,js:!1}},ab={base:embed_path,css:embed_path+"css/",js:embed_path+"js/",locale:embed_path+"js/locale/",jquery:"//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js",font:{google:!1,css:embed_path+"css/themes/font/",js:"//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"}},W={version:G,debug:!1,type:"timeline",id:"storyjs",embed_id:"timeline-embed",embed:!0,width:"100%",height:"100%",source:"https://docs.google.com/spreadsheet/pub?key=0Agl_Dv6iEbDadFYzRjJPUGktY0NkWXFUWkVIZDNGRHc&output=html",lang:"en",font:"default",css:ab.css+"timeline.css?"+G,js:"",api_keys:{google:"",flickr:"",twitter:""},gmap_key:""},M=[{name:"Merriweather-NewsCycle",google:["News+Cycle:400,700:latin","Merriweather:400,700,900:latin"]},{name:"NewsCycle-Merriweather",google:["News+Cycle:400,700:latin","Merriweather:300,400,700:latin"]},{name:"PoiretOne-Molengo",google:["Poiret+One::latin","Molengo::latin"]},{name:"Arvo-PTSans",google:["Arvo:400,700,400italic:latin","PT+Sans:400,700,400italic:latin"]},{name:"PTSerif-PTSans",google:["PT+Sans:400,700,400italic:latin","PT+Serif:400,700,400italic:latin"]},{name:"PT",google:["PT+Sans+Narrow:400,700:latin","PT+Sans:400,700,400italic:latin","PT+Serif:400,700,400italic:latin"]},{name:"DroidSerif-DroidSans",google:["Droid+Sans:400,700:latin","Droid+Serif:400,700,400italic:latin"]},{name:"Lekton-Molengo",google:["Lekton:400,700,400italic:latin","Molengo::latin"]},{name:"NixieOne-Ledger",google:["Nixie+One::latin","Ledger::latin"]},{name:"AbrilFatface-Average",google:["Average::latin","Abril+Fatface::latin"]},{name:"PlayfairDisplay-Muli",google:["Playfair+Display:400,400italic:latin","Muli:300,400,300italic,400italic:latin"]},{name:"Rancho-Gudea",google:["Rancho::latin","Gudea:400,700,400italic:latin"]},{name:"Bevan-PotanoSans",google:["Bevan::latin","Pontano+Sans::latin"]},{name:"BreeSerif-OpenSans",google:["Bree+Serif::latin","Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800:latin"]},{name:"SansitaOne-Kameron",google:["Sansita+One::latin","Kameron:400,700:latin"]},{name:"Lora-Istok",google:["Lora:400,700,400italic,700italic:latin","Istok+Web:400,700,400italic,700italic:latin"]},{name:"Pacifico-Arimo",google:["Pacifico::latin","Arimo:400,700,400italic,700italic:latin"]}];if(typeof Z=="object"){for(J in Z){Object.prototype.hasOwnProperty.call(Z,J)&&(W[J]=Z[J])}}typeof I!="undefined"&&(W.source=I);if(typeof url_config=="object"){O=!0;W.source.match("docs.google.com")||W.source.match("json")||W.source.match("storify")||(W.source="https://docs.google.com/spreadsheet/pub?key="+W.source+"&output=html")}if(W.js.match("locale")){W.lang=W.js.split("locale/")[1].replace(".js","");W.js=ab.js+"timeline-min.js?"+G}if(!W.js.match("/")){W.css=ab.css+W.type+".css?"+G;W.js=ab.js+W.type;W.debug?W.js+=".js?"+G:W.js+="-min.js?"+G;W.id="storyjs-"+W.type}W.lang.match("/")?ab.locale=W.lang:ab.locale=ab.locale+W.lang+".js?"+G;K();LoadLib.css(W.css,q);if(W.font=="default"){R.font.js=!0;R.font.css=!0}else{var aa;if(W.font.match("/")){aa=W.font.split(".css")[0].split("/");ab.font.name=aa[aa.length-1];ab.font.css=W.font}else{ab.font.name=W.font;ab.font.css=ab.font.css+W.font+".css?"+G}LoadLib.css(ab.font.css,B);for(var F=0;F<M.length;F++){if(ab.font.name==M[F].name){ab.font.google=!0;WebFontConfig={google:{families:M[F].google}}}}ab.font.google?LoadLib.js(ab.font.js,j):R.font.js=!0}try{R.has_jquery=jQuery;R.has_jquery=!0;if(R.has_jquery){var Q=jQuery.fn.jquery.split("."),X=ad.split(".");R.jquery=!0;for(F=0;F<2;F++){parseFloat(Q[F])<parseFloat(X[F])&&(R.jquery=!1)}}}catch(A){R.jquery=!1}R.jquery?ac():LoadLib.js(ab.jquery,ac);this.onloaded_check_again=function(){z()}}LazyLoad=function(q){function x(c,f){var e=q.createElement(c),a;for(a in f){f.hasOwnProperty(a)&&e.setAttribute(a,f[a])}return e}function w(c){var a=b[c],h,f;if(a){h=a.callback;f=a.urls;f.shift();k=0;if(!f.length){h&&h.call(a.context,a.obj);b[c]=null;z[c].length&&j(c)}}}function p(){var a=navigator.userAgent;y={async:q.createElement("script").async===!0};(y.webkit=/AppleWebKit\//.test(a))||(y.ie=/MSIE/.test(a))||(y.opera=/Opera/.test(a))||(y.gecko=/Gecko\//.test(a))||(y.unknown=!0)}function j(n,c,f,a,s){var C=function(){w(n)},e=n==="css",r=[],u,t,B,D,h,A;y||p();if(c){c=typeof c=="string"?[c]:c.concat();if(e||y.async||y.gecko||y.opera){z[n].push({urls:c,callback:f,obj:a,context:s})}else{for(u=0,t=c.length;u<t;++u){z[n].push({urls:[c[u]],callback:u===t-1?f:null,obj:a,context:s})}}}if(b[n]||!(D=b[n]=z[n].shift())){return}g||(g=q.head||q.getElementsByTagName("head")[0]);h=D.urls;for(u=0,t=h.length;u<t;++u){A=h[u];if(e){B=y.gecko?x("style"):x("link",{href:A,rel:"stylesheet"})}else{B=x("script",{src:A});B.async=!1}B.className="lazyload";B.setAttribute("charset","utf-8");if(y.ie&&!e){B.onreadystatechange=function(){if(/loaded|complete/.test(B.readyState)){B.onreadystatechange=null;C()}}}else{if(e&&(y.gecko||y.webkit)){if(y.webkit){D.urls[u]=B.href;m()}else{B.innerHTML='@import "'+A+'";';v(B)}}else{B.onload=B.onerror=C}}r.push(B)}for(u=0,t=r.length;u<t;++u){g.appendChild(r[u])}}function v(c){var a;try{a=!!c.sheet.cssRules}catch(f){k+=1;k<200?setTimeout(function(){v(c)},50):a&&w("css");return}w("css")}function m(){var c=b.css,a;if(c){a=d.length;while(--a>=0){if(d[a].href===c.urls[0]){w("css");break}}k+=1;c&&(k<200?setTimeout(m,50):w("css"))}}var y,g,b={},k=0,z={css:[],js:[]},d=q.styleSheets;return{css:function(f,a,h,c){j("css",f,a,h,c)},js:function(f,a,h,c){j("js",f,a,h,c)}}}(this.document);LoadLib=function(b){function c(f){var g=0,d=!1;for(g=0;g<a.length;g++){a[g]==f&&(d=!0)}if(d){return !0}a.push(f);return !1}var a=[];return{css:function(h,f,g,d){c(h)||LazyLoad.css(h,f,g,d)},js:function(h,f,g,d){c(h)||LazyLoad.js(h,f,g,d)}}}(this.document);var WebFontConfig;if(typeof embed_path=="undefined"){var _tmp_script_path=getEmbedScriptPath("storyjs-embed.js"),embed_path=_tmp_script_path.substr(0,_tmp_script_path.lastIndexOf("js/"))}(function(){typeof url_config=="object"?createStoryJS(url_config):typeof timeline_config=="object"?createStoryJS(timeline_config):typeof storyjs_config=="object"?createStoryJS(storyjs_config):typeof config=="object"&&createStoryJS(config)})();